<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interativo - IFSC Campus Florianópolis</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap');

    body, html {
        height: 100%;
        margin: 0;
        overflow: hidden;
        color: #333;
    }
    body {
        font-family: 'Poppins', sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(135deg, #4dc2c2, #2a8e8e); 
    }
    .map-container {
        position: relative;
        max-width: 900px;
        width: 90vw;
        border: 10px solid #ffffff; 
        border-radius: 20px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        overflow: hidden;
    }
    #campus-map-img {
        display: block;
        width: 100%;
        height: auto;
        border-radius: 10px;
    }
    #interactive-canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%; 
        height: 100%;
        cursor: pointer;
    }
    .popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.8);
        background-color: #F5F5DC;
        padding: 25px;
        border-radius: 20px;
        box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        z-index: 10;
        max-width: 450px;
        width: 90%;
        text-align: left;
        border: 5px solid #2a8e8e;
        opacity: 0;
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    }
    .popup.active {
        display: block;
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
    }
    .popup-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 2px dashed #4dc2c2;
        padding-bottom: 10px;
        margin-bottom: 15px;
    }
    .popup-header h3 {
        margin: 0;
        color: #2a8e8e;
        font-weight: 600;
    }
    .popup-header button {
        background: #4dc2c2;
        color: white;
        border: none;
        border-radius: 50%;
        font-size: 20px;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background 0.2s ease-in-out;
    }
    .popup-header button:hover {
        background: #2a8e8e;
    }
    .popup-content p, .popup-content ul {
        margin: 0;
        padding: 0;
        line-height: 1.5;
        font-size: 16px;
    }
    .popup-content strong {
        color: #2a8e8e;
    }
    .popup-content ul {
        list-style-type: none;
        padding-left: 0;
    }
    .popup-content ul li::before {
        content: '•';
        color: #4dc2c2;
        margin-right: 8px;
    }
    
    /* Regras de otimização para mobile */
    @media (max-width: 768px) {
        .map-container {
            width: 100vw;
            height: auto;
            border: none;
            border-radius: 0;
            box-shadow: none;
        }
        #campus-map-img {
            border-radius: 0;
        }
    }
</style>
</head>
<body>

<div class="map-container">
    <img src="Mapa total (1).jpg" alt="Mapa do Câmpus IFSC Florianópolis" id="campus-map-img">
    <canvas id="interactive-canvas"></canvas>

    <div id="popup-container" class="popup">
        <div class="popup-header">
            <h3 id="popup-title"></h3>
            <button onclick="closeInfo()">×</button>
        </div>
        <div class="popup-content">
            <p id="popup-content-text"></p>
        </div>
    </div>
</div>

<script>
    const popup = document.getElementById('popup-container');
    const popupTitle = document.getElementById('popup-title');
    const popupContent = document.getElementById('popup-content-text');
    const mapImg = document.getElementById('campus-map-img');
    const canvas = document.getElementById('interactive-canvas');
    const ctx = canvas.getContext('2d');
    const mapContainer = document.querySelector('.map-container');

    const sectors = {
        'hall': {
            title: 'Hall de Entrada',
            content: `<p><strong>Descrição:</strong> Área principal do evento, onde a recepção, credenciamento e estandes de informações estão localizados.</p><p><strong>Programação:</strong></p><ul><li>14:00 - Abertura oficial do evento e discurso de boas-vindas.</li><li>14:30 - Apresentação cultural.</li></ul>`,
            coords: '419,344,415,402,461,445,570,432,568,377,527,326,429,342',
            icon: 'H'
        },
        'ala-b': {
            title: 'Ala B - Exposição de Projetos',
            content: `<p><strong>Descrição:</strong> Exposição de projetos de TCC dos alunos dos cursos de T.I e Engenharia.</p><p><strong>Programação:</strong></p><ul><li>15:00 - Demonstração de protótipo de automação residencial.</li><li>16:30 - Apresentação do projeto de aplicativo para segurança alimentar.</li></ul>`,
            coords: '502,258,517,252,537,268,519,293,471,287',
            icon: 'B'
        },
        'ala-c': {
            title: 'Ala C - Cursos e Palestras',
            content: `<p><strong>Descrição:</strong> Salas de aula onde acontecerão minicursos e palestras.</p><p><strong>Programação:</strong></p><ul><li>15:00 - Palestra: "Inovação e Empreendedorismo no Setor de Tecnologia"</li><li>16:00 - Minicurso: "Introdução à Programação com Python"</li></ul>`,
            coords: '337,257,421,279,504,195,503,138,419,126,328,191,332,255',
            icon: 'C'
        },
        'ala-d': {
            title: 'Ala D - Laboratórios',
            content: `<p><strong>Descrição:</strong> Laboratórios de eletrônica e mecânica. Aqui você poderá ver experimentos práticos e demonstrações.</p><p><strong>Programação:</strong></p><ul><li>14:30 - Experimentos com circuitos elétricos.</li><li>16:00 - Demonstração de protótipo de braço robótico.</li></ul>`,
            coords: '369,101,385,139,284,256,232,241',
            icon: 'D'
        },
        'ala-e': {
            title: 'Ala E - Ginásio',
            content: `<p><strong>Descrição:</strong> Área para oficinas de esportes e atividades recreativas para os visitantes.</p><p><strong>Programação:</strong></p><ul><li>15:00 - Oficina de vôlei.</li><li>16:00 - Aulas abertas de basquete.</li></ul>`,
            coords: '403,59,400,103,484,112,520,75,512,31,447,20',
            icon: 'E'
        },
        'ala-f': {
            title: 'Ala F - Quadra e Recreação',
            content: `<p><strong>Descrição:</strong> Quadra poliesportiva. Local para atividades ao ar livre e jogos interativos.</p><p><strong>Programação:</strong></p><ul><li>14:00 - Jogos de tabuleiro gigantes.</li><li>15:30 - Competição de e-sports no telão.</li></ul>`,
            coords: '648,231,627,201,606,205,533,297,590,309',
            icon: 'F'
        },
        'ala-g': {
            title: 'Ala G - Auditório',
            content: `<p><strong>Descrição:</strong> O principal auditório do campus. Aqui serão realizados os workshops e palestras mais importantes.</p><p><strong>Programação:</strong></p><ul><li>15:00 - Palestra Magna: "O Papel da Ciência na Construção do Futuro".</li><li>17:00 - Mesa Redonda: "Desafios e Oportunidades na Área de Pesquisa".</li></ul>`,
            coords: '594,312,830,366,873,274,649,232,591,305',
            icon: 'G'
        },
        'ala-h': {
            title: 'Ala H - Laboratórios de Análise',
            content: `<p><strong>Descrição:</strong> Laboratórios de química e biologia. Serão realizados experimentos práticos e demonstrações de técnicas laboratoriais.</p><p><strong>Programação:</strong></p><ul><li>14:30 - Oficina de extração de DNA de frutas.</li><li>16:00 - Demonstração de reações químicas coloridas.</li></ul>`,
            coords: '782,190,866,204,857,264,756,253',
            icon: 'H'
        },
        'ala-i': {
            title: 'Ala I - Cantina e Áreas de Alimentação',
            content: `<p><strong>Descrição:</strong> Área de alimentação principal do evento. Terá food trucks e estandes de comida e bebida.</p><p><strong>Programação:</strong></p><ul><li>12:00 às 18:00 - Venda de lanches, almoço e bebidas.</li><li>15:00 - Música ao vivo para animar o ambiente.</li></ul>`,
            coords: '800,525,873,544,902,437,832,419,796,520',
            icon: 'I'
        },
    };

    let scaleX = 1;
    let scaleY = 1;

    function drawPolygon(coords, style) {
        if (!coords) return;
        const points = coords.split(',').map(Number);
        
        ctx.beginPath();
        ctx.moveTo(points[0], points[1]);
        for (let i = 2; i < points.length; i += 2) {
            ctx.lineTo(points[i], points[i+1]);
        }
        ctx.closePath();
        
        if (style.fill) {
            ctx.fillStyle = style.fill;
            ctx.fill();
        }
        if (style.stroke) {
            ctx.strokeStyle = style.stroke;
            ctx.lineWidth = style.lineWidth || 2;
            ctx.stroke();
        }
    }

    function getPolygonCenter(coords) {
        const points = coords.split(',').map(Number);
        let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;
        for (let i = 0; i < points.length; i += 2) {
            minX = Math.min(minX, points[i]);
            maxX = Math.max(maxX, points[i]);
            minY = Math.min(minY, points[i+1]);
            maxY = Math.max(maxY, points[i+1]);
        }
        return {
            x: (minX + maxX) / 2,
            y: (minY + maxY) / 2
        };
    }

    function drawSectorIcon(sectorId, coords, iconText) {
        const center = getPolygonCenter(coords);
        const iconSize = 25;
        const fontSize = 16;

        ctx.beginPath();
        ctx.arc(center.x, center.y, iconSize, 0, Math.PI * 2, false);
        ctx.fillStyle = 'rgba(245, 245, 220, 0.9)'; 
        ctx.fill();
        ctx.strokeStyle = '#2a8e8e'; /* Verde-água */
        ctx.lineWidth = 2;
        ctx.stroke();

        ctx.font = `700 ${fontSize}px 'Fredoka One'`;
        ctx.fillStyle = '#ffffff'; 
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(iconText, center.x, center.y + 2);
    }

    function drawPermanentBordersAndIcons() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); 
        for (const id in sectors) {
            drawPolygon(sectors[id].coords, { stroke: '#2a8e8e', lineWidth: 4 }); /* Verde-água */
            drawSectorIcon(id, sectors[id].coords, sectors[id].icon);
        }
    }

    function initMap() {
        canvas.width = mapImg.naturalWidth;
        canvas.height = mapImg.naturalHeight;
        
        scaleX = mapImg.naturalWidth / mapImg.offsetWidth;
        scaleY = mapImg.naturalHeight / mapImg.offsetHeight;

        drawPermanentBordersAndIcons();
    }

    canvas.addEventListener('mousemove', (e) => {
        const rect = canvas.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        const mouseY = e.clientY - rect.top;
        
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawPermanentBordersAndIcons();

        for (const id in sectors) {
            const coords = sectors[id].coords;
            const points = coords.split(',').map(Number);
            
            ctx.beginPath();
            ctx.moveTo(points[0], points[1]);
            for (let i = 2; i < points.length; i += 2) {
                ctx.lineTo(points[i], points[i+1]);
            }
            ctx.closePath();
            
            if (ctx.isPointInPath(mouseX * scaleX, mouseY * scaleY)) {
                drawPolygon(coords, { stroke: '#ffffff', lineWidth: 6 }); /* Branco */
                drawSectorIcon(id, sectors[id].coords, sectors[id].icon);
                break;
            }
        }
    });

    canvas.addEventListener('click', (e) => {
        const rect = canvas.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        const mouseY = e.clientY - rect.top;

        for (const id in sectors) {
            const coords = sectors[id].coords;
            const points = coords.split(',').map(Number);
            
            ctx.beginPath();
            ctx.moveTo(points[0], points[1]);
            for (let i = 2; i < points.length; i += 2) {
                ctx.lineTo(points[i], points[i+1]);
            }
            ctx.closePath();

            if (ctx.isPointInPath(mouseX * scaleX, mouseY * scaleY)) {
                showInfo(id);
                break;
            }
        }
    });

    function showInfo(sector) {
        if (sectors[sector]) {
            popupTitle.innerHTML = sectors[sector].title;
            popupContent.innerHTML = sectors[sector].content;
            popup.classList.add('active');
        }
    }

    function closeInfo() {
        popup.classList.remove('active');
    }

    mapImg.onload = initMap;
    if (mapImg.complete) {
        initMap();
    }
    window.addEventListener('resize', initMap);

</script>

</body>
</html>