<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interativo - IFSC Campus Florian√≥polis</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #4dc2c2, #2a8e8e); 
            margin: 0;
            overflow: hidden;
            color: #333;
        }
        .map-container {
            position: relative;
            max-width: 900px;
            width: 100%;
            border: 10px solid #ffffff; 
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        #campus-map-img {
            display: block;
            width: 100%;
            height: auto;
            border-radius: 10px;
        }
        #interactive-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%; 
            height: 100%;
            cursor: pointer;
        }
        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background-color: #F5F5DC; 
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            z-index: 10;
            max-width: 450px;
            text-align: left;
            border: 5px solid #ff6347; 
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        .popup.active {
            display: block;
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px dashed #ff6347; 
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        .popup-header h3 {
            margin: 0;
            color: #2a8e8e; 
            font-weight: 600;
        }
        .popup-header button {
            background: #ff6347; 
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 20px;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.2s ease-in-out;
        }
        .popup-header button:hover {
            background: #e5533d;
        }
        .popup-content p, .popup-content ul {
            margin: 0;
            padding: 0;
            line-height: 1.5;
            font-size: 16px;
        }
        .popup-content strong {
            color: #2a8e8e; 
        }
        .popup-content ul {
            list-style-type: none;
            padding-left: 0;
        }
        .popup-content ul li::before {
            content: 'üíñ'; 
            color: #ff6347;
            margin-right: 8px;
        }
    </style>
</head>
<body>

<div class="map-container">
    <img src="Mapa total (1).jpg" alt="Mapa do C√¢mpus IFSC Florian√≥polis" id="campus-map-img">
    <canvas id="interactive-canvas"></canvas>

    <div id="popup-container" class="popup">
        <div class="popup-header">
            <h3 id="popup-title"></h3>
            <button onclick="closeInfo()">√ó</button>
        </div>
        <div class="popup-content">
            <p id="popup-content-text"></p>
        </div>
    </div>
</div>

<script>
    const popup = document.getElementById('popup-container');
    const popupTitle = document.getElementById('popup-title');
    const popupContent = document.getElementById('popup-content-text');
    const mapImg = document.getElementById('campus-map-img');
    const canvas = document.getElementById('interactive-canvas');
    const ctx = canvas.getContext('2d');

    const sectors = {
        'hall': {
            title: 'Hall de Entrada',
            content: `<p><strong>Descri√ß√£o:</strong> √Årea principal do evento, onde a recep√ß√£o, credenciamento e estandes de informa√ß√µes est√£o localizados.</p><p><strong>Programa√ß√£o:</strong></p><ul><li>14:00 - Abertura oficial do evento e discurso de boas-vindas.</li><li>14:30 - Apresenta√ß√£o cultural.</li></ul>`,
            coords: '419,344,415,402,461,445,570,432,568,377,527,326,429,342',
            icon: 'H'
        },
        'ala-b': {
            title: 'Ala B - Exposi√ß√£o de Projetos',
            content: `<p><strong>Descri√ß√£o:</strong> Exposi√ß√£o de projetos de TCC dos alunos dos cursos de T.I e Engenharia.</p><p><strong>Programa√ß√£o:</strong></p><ul><li>15:00 - Demonstra√ß√£o de prot√≥tipo de automa√ß√£o residencial.</li><li>16:30 - Apresenta√ß√£o do projeto de aplicativo para seguran√ßa alimentar.</li></ul>`,
            coords: '502,258,517,252,537,268,519,293,471,287',
            icon: 'B'
        },
        'ala-c': {
            title: 'Ala C - Cursos e Palestras',
            content: `<p><strong>Descri√ß√£o:</strong> Salas de aula onde acontecer√£o minicursos e palestras.</p><p><strong>Programa√ß√£o:</strong></p><ul><li>15:00 - Palestra: "Inova√ß√£o e Empreendedorismo no Setor de Tecnologia"</li><li>16:00 - Minicurso: "Introdu√ß√£o √† Programa√ß√£o com Python"</li></ul>`,
            coords: '337,257,421,279,504,195,503,138,419,126,328,191,332,255',
            icon: 'C'
        },
        'ala-d': {
            title: 'Ala D - Laborat√≥rios',
            content: `<p><strong>Descri√ß√£o:</strong> Laborat√≥rios de eletr√¥nica e mec√¢nica. Aqui voc√™ poder√° ver experimentos pr√°ticos e demonstra√ß√µes.</p><p><strong>Programa√ß√£o:</strong></p><ul><li>14:30 - Experimentos com circuitos el√©tricos.</li><li>16:00 - Demonstra√ß√£o de prot√≥tipo de bra√ßo rob√≥tico.</li></ul>`,
            coords: '369,101,385,139,284,256,232,241',
            icon: 'D'
        },
        'ala-e': {
            title: 'Ala E - Gin√°sio',
            content: `<p><strong>Descri√ß√£o:</strong> √Årea para oficinas de esportes e atividades recreativas para os visitantes.</p><p><strong>Programa√ß√£o:</strong></p><ul><li>15:00 - Oficina de v√¥lei.</li><li>16:00 - Aulas abertas de basquete.</li></ul>`,
            coords: '403,59,400,103,484,112,520,75,512,31,447,20',
            icon: 'E'
        },
        'ala-f': {
            title: 'Ala F - Quadra e Recrea√ß√£o',
            content: `<p><strong>Descri√ß√£o:</strong> Quadra poliesportiva. Local para atividades ao ar livre e jogos interativos.</p><p><strong>Programa√ß√£o:</strong></p><ul><li>14:00 - Jogos de tabuleiro gigantes.</li><li>15:30 - Competi√ß√£o de e-sports no tel√£o.</li></ul>`,
            coords: '648,231,627,201,606,205,533,297,590,309',
            icon: 'F'
        },
        'ala-g': {
            title: 'Ala G - Audit√≥rio',
            content: `<p><strong>Descri√ß√£o:</strong> O principal audit√≥rio do campus. Aqui ser√£o realizados os workshops e palestras mais importantes.</p><p><strong>Programa√ß√£o:</strong></p><ul><li>15:00 - Palestra Magna: "O Papel da Ci√™ncia na Constru√ß√£o do Futuro".</li><li>17:00 - Mesa Redonda: "Desafios e Oportunidades na √Årea de Pesquisa".</li></ul>`,
            coords: '594,312,830,366,873,274,649,232,591,305',
            icon: 'G'
        },
        'ala-h': {
            title: 'Ala H - Laborat√≥rios de An√°lise',
            content: `<p><strong>Descri√ß√£o:</strong> Laborat√≥rios de qu√≠mica e biologia. Ser√£o realizados experimentos pr√°ticos e demonstra√ß√µes de t√©cnicas laboratoriais.</p><p><strong>Programa√ß√£o:</strong></p><ul><li>14:30 - Oficina de extra√ß√£o de DNA de frutas.</li><li>16:00 - Demonstra√ß√£o de rea√ß√µes qu√≠micas coloridas.</li></ul>`,
            coords: '782,190,866,204,857,264,756,253',
            icon: 'H'
        },
        'ala-i': {
            title: 'Ala I - Cantina e √Åreas de Alimenta√ß√£o',
            content: `<p><strong>Descri√ß√£o:</strong> √Årea de alimenta√ß√£o principal do evento. Ter√° food trucks e estandes de comida e bebida.</p><p><strong>Programa√ß√£o:</strong></p><ul><li>12:00 √†s 18:00 - Venda de lanches, almo√ßo e bebidas.</li><li>15:00 - M√∫sica ao vivo para animar o ambiente.</li></ul>`,
            coords: '800,525,873,544,902,437,832,419,796,520',
            icon: 'I'
        },
    };

    let scaleX = 1;
    let scaleY = 1;

    function drawPolygon(coords, style) {
        if (!coords) return;
        const points = coords.split(',').map(Number);
        
        ctx.beginPath();
        ctx.moveTo(points[0], points[1]);
        for (let i = 2; i < points.length; i += 2) {
            ctx.lineTo(points[i], points[i+1]);
        }
        ctx.closePath();
        
        if (style.fill) {
            ctx.fillStyle = style.fill;
            ctx.fill();
        }
        if (style.stroke) {
            ctx.strokeStyle = style.stroke;
            ctx.lineWidth = style.lineWidth || 2;
            ctx.stroke();
        }
    }

    function getPolygonCenter(coords) {
        const points = coords.split(',').map(Number);
        let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;
        for (let i = 0; i < points.length; i += 2) {
            minX = Math.min(minX, points[i]);
            maxX = Math.max(maxX, points[i]);
            minY = Math.min(minY, points[i+1]);
            maxY = Math.max(maxY, points[i+1]);
        }
        return {
            x: (minX + maxX) / 2,
            y: (minY + maxY) / 2
        };
    }

    function drawSectorIcon(sectorId, coords, iconText) {
        const center = getPolygonCenter(coords);
        const iconSize = 25;
        const fontSize = 16;

        ctx.beginPath();
        ctx.arc(center.x, center.y, iconSize, 0, Math.PI * 2, false);
        ctx.fillStyle = 'rgba(245, 245, 220, 0.9)'; 
        ctx.fill();
        ctx.strokeStyle = '#ff6347'; 
        ctx.lineWidth = 2;
        ctx.stroke();

        ctx.font = `700 ${fontSize}px 'Fredoka One'`;
        ctx.fillStyle = '#ffffff'; 
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(iconText, center.x, center.y + 2);
    }

    function drawPermanentBordersAndIcons() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); 
        for (const id in sectors) {
            // AQUI EST√Å A MUDAN√áA: A BORDA PERMANENTE √â VERDE-√ÅGUA
            drawPolygon(sectors[id].coords, { stroke: '#2a8e8e', lineWidth: 4 }); 
            drawSectorIcon(id, sectors[id].coords, sectors[id].icon);
        }
    }

    function initMap() {
        canvas.width = mapImg.naturalWidth;
        canvas.height = mapImg.naturalHeight;
        
        scaleX = mapImg.naturalWidth / mapImg.offsetWidth;
        scaleY = mapImg.naturalHeight / mapImg.offsetHeight;

        drawPermanentBordersAndIcons();

        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPermanentBordersAndIcons();

            for (const id in sectors) {
                const coords = sectors[id].coords;
                const points = coords.split(',').map(Number);
                
                ctx.beginPath();
                ctx.moveTo(points[0], points[1]);
                for (let i = 2; i < points.length; i += 2) {
                    ctx.lineTo(points[i], points[i+1]);
                }
                ctx.closePath();
                
                if (ctx.isPointInPath(mouseX * scaleX, mouseY * scaleY)) {
                    // A BORDA DE DESTAQUE AINDA √â VERDE-√ÅGUA ESCURO
                    drawPolygon(coords, { stroke: '#2a8e8e', lineWidth: 6 });
                    drawSectorIcon(id, sectors[id].coords, sectors[id].icon);
                    break;
                }
            }
        });

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            for (const id in sectors) {
                const coords = sectors[id].coords;
                const points = coords.split(',').map(Number);
                
                ctx.beginPath();
                ctx.moveTo(points[0], points[1]);
                for (let i = 2; i < points.length; i += 2) {
                    ctx.lineTo(points[i], points[i+1]);
                }
                ctx.closePath();

                if (ctx.isPointInPath(mouseX * scaleX, mouseY * scaleY)) {
                    showInfo(id);
                    break;
                }
            }
        });
    }

    function showInfo(sector) {
        if (sectors[sector]) {
            popupTitle.innerHTML = sectors[sector].title;
            popupContent.innerHTML = sectors[sector].content;
            popup.classList.add('active');
        }
    }

    function closeInfo() {
        popup.classList.remove('active');
    }

    mapImg.onload = initMap;
    if (mapImg.complete) {
        initMap();
    }

    window.addEventListener('resize', () => {
        if (mapImg.complete) {
            initMap();
        }
    });

src="mobile-map.js"

</script>

<script src="mobile-map.js"></script>

</body>
</html>